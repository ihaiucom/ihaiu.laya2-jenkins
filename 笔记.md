## Jenkins 相关文档

[Jenkins官方文档]  
https://github.com/ihaiucom/Jenkinsdocs

[Jenkins教程]  
https://jenkins.io/zh/doc/book/pipeline/#scripted-pipeline-fundamentals

[第十章-流水线实践(二)] 
https://github.com/ihaiucom/Jenkinsdocs/blob/master/chapter/第十章-流水线实践(二).md

[流水线语法] 
https://jenkins.io/zh/doc/book/pipeline/syntax/

## Jenkins 插件提速

[Jenkins安装插件提速]
https://www.cnblogs.com/hellxz/p/jenkins_install_plugins_faster.html



```

打开 D:\Jenkins\.jenkins\updates\default.json

http://updates.jenkins-ci.org/download/
替换
https://mirrors.tuna.tsinghua.edu.cn/jenkins/



http://www.google.com/
替换
https://www.baidu.com/
```


## Jenkins Pipline 

```
String workspace="D:/Jenkins/GameJJSG/"
pipeline 
{
   agent 
   {
       node 
       {
            label "master"						// 设置运行机器节点标签
            customWorkspace "${workspace}" 		// 自定义在工作空间 
       }
   }

   options 
   {
   		timestamps()  							// 日志会有时间
	  	timeout(time: 20, unit: 'SECONDS') 		// 设置超时时间
	  	retry(2)								// 设置重复次数
	  	disableConcurrentBuilds()				// 不允许并发构建
	  	skipDefaultCheckout true				// 删除隐试checkou scm语句
	}


   stages 
   {
      stage('步骤一:拉取GIT') 
      {
         steps 
         {
         	echo "开始拉取GIT"
            git credentialsId: '647b7b11-5185-4289-843d-77cc8dfbc945', url: 'git@github.com:ihaiucom/ihaiu.laya2-jenkins.git'
         }
      }

      stage('步骤二：Say Hello') 
      {
         steps 
         {
            echo 'Begin Say'
         	timeout(time: 3, unit: 'SECONDS')  // 设置超时时间
         	{
            	echo 'Hello World'
			}
         }
      }
   }

   post 
   {
	  always 
	  {
	  	script
	  	{

	    	echo "always 无论流水线或阶段的完成状态如何，都允许在 post 部分运行该步骤。"
	  	}
	  }

	  unstable 
	  {
	  	echo "unstable 只有当前流水线或阶段的完成状态为unstable，才允许在 post 部分运行该步骤, 通常由于测试失败,代码违规等造成。通常web UI是黄色。"
	  }

	  notBuilt 
	  {
	    echo "notBuilt"
	  }

	  cleanup 
	  {
	    echo "cleanup"
	  }

	  regression 
	  {
	    echo "regression"
	  }

	  aborted 
	  {
	    echo "aborted 只有当前流水线或阶段的完成状态为aborted，才允许在 post 部分运行该步骤, 通常由于流水线被手动的aborted。通常web UI是灰色"
	  }

	  success 
	  {
	  	script
	  	{

	  		currentBuild.description += "\n 构建成功"
	    	echo "success 只有当前流水线或阶段的完成状态为success，才允许在 post 部分运行该步骤, 通常web UI是蓝色或绿色。"
	  	}
	  }

	  failure 
	  {
	    echo "failure 只有当前流水线或阶段的完成状态为failure，才允许在 post 部分运行该步骤, 通常web UI是红色。"
	  }

	  unsuccessful 
	  {
	    echo "unsuccessful"
	  }

	  fixed 
	  {
	    echo "fixed"
	  }

	  changed 
	  {
	    echo "changed 只有当前流水线或阶段的完成状态与它之前的运行不同时，才允许在 post 部分运行该步骤。"
	  }
	}



}


```


## 安装nodejs
http://nodejs.cn/

## 安装cnpm
https://npm.taobao.org/

npm install -g cnpm --registry=https://registry.npm.taobao.org


## 安装gulp
https://www.cnblogs.com/bobo1/p/10918641.html

https://www.cnblogs.com/limitcode/p/7906447.html

cnpm install -g gulp
cnpm install --save-dev gulp
cnpm install gulp
cnpm install --save gulp

## 安装layaair2-cmd
https://npm.taobao.org/package/layaair2-cmd

cnpm install layaair2-cmd -g
cnpm install layaair2-cmd
cnpm install --save layaair2-cmd


node_modules\.bin\layaair2-cmd compile -w D:\zengfeng\githubs\ihaiu.laya2-jenkins\LayaGame24
node_modules\.bin\layaair2-cmd publish -c web -w D:\zengfeng\githubs\ihaiu.laya2-jenkins\LayaGame24
node_modules\.bin\layaair2-cmd publish -c wxgame -w D:\zengfeng\githubs\ihaiu.laya2-jenkins\LayaGame24


layaair2-cmd compile -w D:\zengfeng\githubs\ihaiu.laya2-jenkins\LayaGame24


## 微信命令
